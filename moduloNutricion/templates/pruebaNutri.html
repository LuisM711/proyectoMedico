{% load static %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="{% static 'css/asignacionMenu.css' %}">
<div id="asignarMenu" style="display: none;" class="contenido">
    <h2>Menú Alimenticio</h2>
    <h3>Por porciones de Alimentos</h3>
    <table class="table  table-bordered border-primary border border-primary-subtle table-hover" id="tabla">
       <thead class="table-dark">
        <tr>
            <th><b>Comidas</b></th>
            <th><i class="fa-solid fa-carrot"></i> Verduras</th>
            <th><i class="fa-solid fa-apple-whole"></i> Frutas</th>
            <th><i class="fa-solid fa-wheat-awn"></i> Cereales</th>
            <th><i class="fa-solid fa-wheat-awn"></i> Leguminosas</th>
            <th><i class="fa-solid fa-bacon"></i> Origen Animal</th>
            <th><i class="fa-solid fa-mug-saucer"></i> Leche y Derivados</th>
            <th><i class="fa-solid fa-cheese"></i> Grasas</th>
            <th><i class="fa-solid fa-ice-cream"></i> Azúcares</th>
        </tr>
       </thead>
  
      
        <tr>
            <th><i class="fa-solid fa-egg"></i><p>Desayunos</p></th>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            
        </tr>
        <tr>
            <th><i class="fa-solid fa-apple-whole"></i><p>Colación</p></th>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
        </tr> 
        <tr>
            <th><i class="fa-solid fa-drumstick-bite"></i><p>Comidas</p</th>
                <td>
                    <input type="number" required min="0" required max="20" value="0" class="porciones">
                </td>
                <td>
                    <input type="number" required min="0" required max="20" value="0" class="porciones">
                </td>
                <td>
                    <input type="number" required min="0" required max="20" value="0" class="porciones">
                </td>
                <td>
                    <input type="number" required min="0" required max="20" value="0" class="porciones">
                </td>
                <td>
                    <input type="number" required min="0" required max="20" value="0" class="porciones">
                </td>
                <td>
                    <input type="number" required min="0" required max="20" value="0" class="porciones">
                </td>
                <td>
                    <input type="number" required min="0" required max="20" value="0" class="porciones">
                </td>
                <td>
                    <input type="number" required min="0" required max="20" value="0" class="porciones">
                </td>
        
            </tr>
            <tr>
                <th><i class="fa-solid fa-apple-whole"></i><p>Colación</p></th>
                <td>
                    <input type="number" required min="0" required max="20" value="0" class="porciones">
                </td>
                <td>
                    <input type="number" required min="0" required max="20" value="0" class="porciones">
                </td>
                <td>
                    <input type="number" required min="0" required max="20" value="0" class="porciones">
                </td>
                <td>
                    <input type="number" required min="0" required max="20" value="0" class="porciones">
                </td>
                <td>
                    <input type="number" required min="0" required max="20" value="0" class="porciones">
                </td>
                <td>
                    <input type="number" required min="0" required max="20" value="0" class="porciones">
                </td>
                <td>
                    <input type="number" required min="0" required max="20" value="0" class="porciones">
                </td>
                <td>
                    <input type="number" required min="0" required max="20" value="0" class="porciones">
                </td>
            </tr> 
        <tr>
            <th><i class="fa-solid fa-mug-saucer"></i><p>Cenas</p></th>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
            <td>
                <input type="number" required min="0" required max="20" value="0" class="porciones">
            </td>
        </tr> 
    </table>
        
        <div class="recomendaciones">
            <section>
                <h2>Recomendaciones</h2>
                <select class="form-select form-select-lg mb-3" aria-label="Large select example">
                    <option selected>Seleccione una comida</option>
                    <option value="1">Desayuno</option>
                    <option value="2">Comida</option>
                    <option value="3">Cena</option>
                    <option value="4">Colación</option>
                </select>
                <textarea name="" id="" cols="30" rows="10"></textarea>
            </section>
            <input type="button" value="Lista de Alimentos" id="lista" onclick="openIngredientDialog()">
            <input type="button" onclick="siguiente('menu')" value="Siguiente">
            <dialog id="alimentos">
                <div class="model-content">
                    <input type="button" class="close" value="X">
                    <div id="modalContent">
                    </div>
                </div>
            </dialog>
        </div>
</div>
<script>
    var modal = document.getElementById("alimentos");
    var span = modal.querySelector(".close");
    span.onclick = function(){
        modal.close();
        modal.style.display='none';
    }
    window.onclick=function(event){
        if(event.target == modal){
            modal.close();
            modal.style.display='none';
        }
    }
    const buttonLista = document.querySelector("#lista");
    buttonLista.addEventListener("click", function(){
        fetch('{% static "alimentos.json" %}')
        .then(response => response.json())
        .then(data => fillModalWithData(data))
        .catch(error => console.error('Error fetching JSON:',error));
        const alertDialog = document.querySelector("#alimentos");
        alertDialog.showModal();
    });
    function fillModalWithData(jsonData){

        var alimentos = jsonData.alimentos;
        var modelData = '';
            modelData = `<table class="table  table-bordered border-primary border border-primary-subtle table-hover" id="tabla">
                            <thead class="table-dark">
                                <tr>
                                    <th><b>Alimento</b></th>
                                    <th><b>Categoría</b></th>
                                    <th><b>Porción</b></th>
                                    <th><b>Unidad</b></th>
                                    <th><b>Energía</b></th>
                                    <th><b>Proteína</b></th>
                                    <th><b>Lipidos</b></th>
                                </tr>
                            </thead>
                        `;
        for(var category in alimentos){
            var categoryObj = alimentos[category];
            for(var key in categoryObj){
                var item = categoryObj[key];
                console.log(key)
                console.log(item.Categoría)
                console.log(item.Porcion)
                console.log(item.Unidad)
                console.log(item.Energia)
                console.log(item.Proteina)
                console.log(item.Lipidos)
                modelData += `
                    <tr>
                        <td>
                            ${key}
                        </td>
                        <td>
                            ${item.Categoría}
                        </td>
                        <td>
                            ${item.Porcion}
                        </td>
                        <td>
                            ${item.Unidad}
                        </td>
                        <td>
                            ${item.Energia}
                        </td>
                        <td>
                            ${item.Proteina}
                        </td>
                        <td>
                            ${item.Lipidos}
                        </td>
                    </tr>
                `;
            }
        }
        document.getElementById('modalContent').innerHTML=modelData;
        document.getElementById('alimentos').style.display='block'
        
    }
    /*function openIngredientDialog(){
        $.getJSON('/consulta_medica/<int:id>/alimentos', function(data){
            var tableHtml = '<table class="table"><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody>';
            $.each(data.alimentos, function(index, alimento){
                tableHtml += `<tr><td>${alimento.verduras}</td><td>${alimento.frutas}</td></tr>`;
            });
            tableHtml+='</tbody></table>';
            $('#lista').html(tableHtml);
            var dialog = document.getElementById('alimentos');
            dialog.showModal();
        });
    }*/
</script>


    